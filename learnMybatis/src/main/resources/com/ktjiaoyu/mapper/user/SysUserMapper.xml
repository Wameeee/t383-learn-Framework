<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 系统用户数据访问映射 -->
<mapper namespace="com.ktjiaoyu.mapper.user.SysUserMapper">
    <!-- 统计系统用户总数 -->
    <select id="count" resultType="int">
        SELECT COUNT(1)
        FROM sys_user
    </select>
    <!-- 查询用户列表-->
    <select id="getUserList" resultType="SysUser">
        SELECT *
        FROM sys_user
    </select>
    <!-- 根据姓名查询用户列表-->
    <select id="getUserListByName" resultType="SysUser">
        SELECT *
        FROM sys_user
        WHERE realName LIKE CONCAT('%', #{param}, '%')
    </select>
    <!-- 查询用户列表-->
    <select id="getUserListByEntity" resultType="SysUser">
        SELECT *
        FROM sys_user
        WHERE realName LIKE CONCAT('%', #{realName}, '%')
          AND roleId = #{roleId}
    </select>
    <select id="getUserListByMap" resultType="SysUser">
        SELECT *
        FROM sys_user
        WHERE realName LIKE CONCAT('%'#{rName}, '%')
          AND roleId = #{rId};
    </select>
    <select id="getUserListByParams" resultType="SysUser">
        SELECT *
        FROM sys_user
        WHERE realName like CONCAT('%' #{realName}, '%')
          AND roleID = #{roleId}
    </select>
    <select id="getUserListWithRoleName" parameterType="sysUser" resultMap="userWithRoleName">
        SELECT u.*, r.roleName
        FROM sys_user u,
             sys_role r
        WHERE u.realName LIKE CONCAT('%', #{realName}, '%')
          AND u.roleId = #{roleId}
          AND u.roleId = r.id
    </select>
    <resultMap id="userWithRoleName" type="sysUser">
        <id property="id" column="id"/>
        <result property="userRoleName" column="roleName"/>
    </resultMap>

</mapper>